<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì—…ë¬´ìš© ë‹¤ì´ì–´ë¦¬ (2025~2030ë…„ ë¬´ì œí•œ ì‚¬ìš© ê°€ëŠ¥)</title>
<style>
  /* ---------- ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ---------- */
  body {
    font-family: "ë§‘ì€ ê³ ë”•", sans-serif;
    margin: 20px;
    background: #f8f8f8;
  }
  .diary {
    max-width: 1100px;
    margin: 0 auto;
    background: white;
    padding: 30px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    border-radius: 10px;
  }

  /* ---------- ìƒë‹¨ íƒìƒ‰ ë²„íŠ¼ ---------- */
  .nav-header {
    text-align: center;
    margin-bottom: 20px;
  }
  .nav-button {
    padding: 8px 12px;
    font-size: 10pt;
    margin: 0 5px;
    border: 1px solid #aaa;
    background: #f0f0f0;
    border-radius: 5px;
    cursor: pointer;
  }
  .nav-button:hover { background: #e0e0e0; }

  /* ---------- ì›” ì œëª© ---------- */
  .month-title {
    text-align: center;
    font-size: 20pt;
    font-weight: bold;
    margin: 20px 0;
    color: #222;
  }

  /* ---------- ë‹¬ë ¥ í…Œì´ë¸” ---------- */
  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }
  th, td {
    border: 1px solid #999;
    height: 110px;              /* ì¹¸ ë†’ì´ - ì—¬ê¸° ìˆ«ìë§Œ ë°”ê¾¸ë©´ ì „ì²´ ì¹¸ ì»¤ì§ */
    vertical-align: top;
    font-size: 7pt;             /* ë©”ëª¨ ê¸€ì í¬ê¸° */
    padding: 5px;
    position: relative;
  }
  th {
    background: #333;
    color: white;
    height: 30px;
  }

  /* ---------- ë‚ ì§œ ìˆ«ì ---------- */
  .day {
    position: absolute;
    top: 4px;
    left: 6px;
    font-weight: bold;
    font-size: 10pt;
  }
  .sunday { color: #d00; }
  .saturday { color: #0066cc; }

  /* ---------- ì˜¤ëŠ˜/ì£¼ë§/ë‹¤ë¥¸ ë‹¬ ìŠ¤íƒ€ì¼ ---------- */
  .today { background: #d0e8ff !important; border: 3px solid #0066cc !important; }
  .weekend { background: #f5f5f5; }
  .other-month { background: #fcfcfc; color: #ccc; }
  .other-month .day { color: #ccc; }

  /* ---------- ë©”ëª¨ ì…ë ¥ë€ ---------- */
  .content {
    width: 100%;
    height: 85px;               /* ë©”ëª¨ ê³µê°„ ë†’ì´ - ì—¬ê¸° ë°”ê¾¸ë©´ ë©”ëª¨ ë” ê¸¸ê²Œ/ì§§ê²Œ */
    border: none;
    background: transparent;
    resize: none;
    font-size: 7pt;
    margin-top: 20px;
    outline: none;
    box-sizing: border-box;
  }

  /* ---------- ì¸ì‡„ ìµœì í™” ---------- */
  @media print {
    body { background: white; margin: 0; }
    .diary { box-shadow: none; padding: 15px; }
    .nav-header, .footer-info { display: none; }
    @page { margin: 10mm; }
  }
</style>
</head>
<body>

<div class="diary">
  <!-- ìƒë‹¨ íƒìƒ‰ ë²„íŠ¼ -->
  <div class="nav-header">
    <button class="nav-button" onclick="changeMonth(-1)">â—€ ì´ì „ ë‹¬</button>
    <button class="nav-button" onclick="goToCurrentMonth()">ğŸ  ì˜¤ëŠ˜ ë‹¬</button>
    <button class="nav-button" onclick="changeMonth(1)">ë‹¤ìŒ ë‹¬ â–¶</button>
  </div>

  <!-- ë‹¬ë ¥ì´ ë“¤ì–´ê°ˆ ê³³ -->
  <div id="calendar-container"></div>
</div>

<p class="footer-info" style="text-align:center; margin-top:50px; color:#555; font-size:11pt;">
  â€¢ ë‚ ì§œ ì¹¸ í´ë¦­ â†’ ë©”ëª¨ ì…ë ¥<br>
  â€¢ ì‘ì„±í•œ ë‚´ìš©ì€ ë¸Œë¼ìš°ì €ì— ìë™ ì €ì¥ë©ë‹ˆë‹¤ (ê¸°ê¸°/ë¸Œë¼ìš°ì €ë³„ ë³„ë„ ì €ì¥)<br>
  â€¢ ì¸ì‡„: Ctrl + P â†’ ì—¬ë°± ì—†ìŒ + ë°°ê²½ ê·¸ë˜í”½ ì²´í¬ ì¶”ì²œ
</p>

<script>
  // ==================== ì„¤ì • ì˜ì—­ (ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ì„¸ìš”!) ====================
  // ì‹œì‘ ë…„ë„ (ì›í•˜ëŠ” ë…„ë„ë¡œ ë°”ê¾¸ì„¸ìš”. 1900~2100ë…„ê¹Œì§€ ììœ ë¡­ê²Œ ê°€ëŠ¥)
  let currentYear = new Date().getFullYear();   // ì²˜ìŒ ì—´ ë•Œ ì˜¬í•´ë¡œ ì‹œì‘
  let currentMonth = new Date().getMonth();     // 0~11 (1ì›”=0)

  // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ (ë°ì´í„° êµ¬ë¶„ìš© - ë°”ê¾¸ì§€ ë§ˆì„¸ìš”)
  const STORAGE_KEY = 'my_diary_2025_';          // ë…„ë„ ë°”ê¾¸ë©´ ì—¬ê¸°ì—ë„ ë°˜ì˜ ì¶”ì²œ
  // ======================================================================

  const months = ["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"];

  /* ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° */
  function loadContent(dateStr) {
    return localStorage.getItem(STORAGE_KEY + dateStr) || '';
  }
  function saveContent(dateStr, content) {
    if (content.trim() === '') {
      localStorage.removeItem(STORAGE_KEY + dateStr);
    } else {
      localStorage.setItem(STORAGE_KEY + dateStr, content);
    }
  }

  /* íƒìƒ‰ ê¸°ëŠ¥ */
  function goToCurrentMonth() {
    const today = new Date();
    currentYear = today.getFullYear();
    currentMonth = today.getMonth();
    renderCalendar();
  }
  function changeMonth(delta) {
    currentMonth += delta;
    if (currentMonth < 0) {
      currentMonth = 11;
      currentYear--;
    } else if (currentMonth > 11) {
      currentMonth = 0;
      currentYear++;
    }
    renderCalendar();
  }

  /* ë‹¬ë ¥ HTML ìƒì„± */
  function renderCalendar() {
    const container = document.getElementById('calendar-container');
    let html = `<div class="month-title">${currentYear}ë…„ ${months[currentMonth]}</div>`;
    html += '<table><tr>';
    ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "].forEach(d => html += `<th>${d}ìš”ì¼</th>`);
    html += '</tr>';

    // í•´ë‹¹ ì›” 1ì¼ì˜ ìš”ì¼ ê³„ì‚°
    let date = new Date(currentYear, currentMonth, 1);
    date.setDate(date.getDate() - date.getDay());  // ê·¸ ì£¼ ì¼ìš”ì¼ë¡œ ì´ë™

    const todayStr = new Date().toISOString().slice(0,10);

    for (let row = 0; row < 6; row++) {
      html += '<tr>';
      for (let i = 0; i < 7; i++) {
        const y = date.getFullYear();
        const m = date.getMonth();
        const d = date.getDate();
        const dateStr = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;

        const isThisMonth = m === currentMonth;
        const isToday = dateStr === todayStr;
        const isWeekend = date.getDay() === 0 || date.getDay() === 6;

        let cellClass = '';
        if (isWeekend) cellClass += 'weekend ';
        if (!isThisMonth) cellClass += 'other-month ';
        if (isToday) cellClass += 'today';

        html += `<td class="${cellClass.trim()}">`;

        // ë‚ ì§œ ìˆ«ì
        let dayClass = date.getDay() === 0 ? 'sunday' : date.getDay() === 6 ? 'saturday' : '';
        html += `<div class="day ${dayClass}">${d}</div>`;

        // ì´ë²ˆ ë‹¬ì´ë©´ ë©”ëª¨ ì…ë ¥ ê°€ëŠ¥
        if (isThisMonth) {
          const saved = loadContent(dateStr);
          html += `<textarea class="content" 
                         oninput="saveContent('${dateStr}', this.value)"
                         placeholder="ë©”ëª¨...">${saved}</textarea>`;
        }

        html += '</td>';
        date.setDate(date.getDate() + 1);
      }
      html += '</tr>';

      // 6ì£¼ ë„˜ìœ¼ë©´ ì¢…ë£Œ (ë³´í†µ 5ì£¼ë©´ ì¶©ë¶„)
      if (row >= 4 && date.getMonth() !== currentMonth) break;
    }
    html += '</table>';

    container.innerHTML = html;
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë‹¬ í‘œì‹œ
  window.onload = renderCalendar;
</script>

</body>
</html>
