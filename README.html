<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>업무용 다이어리 (완전 예쁜 버전)</title>
<style>
  body {font-family:"맑은 고딕",sans-serif;margin:20px;background:#f8f8f8}
  .diary{max-width:1100px;margin:0 auto;background:white;padding:35px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.12)}
  
  .nav-header{text-align:center;margin:30px 0 40px;position:relative}
  .nav-button{padding:10px 22px;font-size:13pt;cursor:pointer;border:1px solid #aaa;background:#f0f8ff;margin:0 12px;border-radius:12px;font-weight:bold}
  .nav-button:hover{background:#d0e8ff}
  
  /* 이게 핵심! 제목이 버튼 바로 아래 딱 붙게 */
  .current-month{
    position:absolute;top:70px;left:50%;transform:translateX(-50%);
    font-size:32pt;font-weight:bold;color:#2c3e50;margin:0;
    white-space:nowrap;
  }

  table{width:100%;border-collapse:collapse;table-layout:fixed;margin-top:20px}
  th,td{border:1px solid #999;height:118px;vertical-align:top;font-size:7pt;padding:7px;position:relative}
  th{background:#2c3e50;color:white;height:42px;font-weight:normal}
  .day{position:absolute;top:7px;left:10px;font-weight:bold;font-size:11pt;z-index:10}
  .today{background:#cde8ff!important;border:3px solid #2980b9!important}
  .sunday{color:#e74c3c}.saturday{color:#2980b9}
  .weekend{background:#f8f8f8}
  .other-month{background:#fcfcfc;color:#ccc}
  .other-month .day{color:#ccc}
  .content{width:100%;height:90px;border:none;resize:none;background:transparent;font-size:7pt;margin-top:26px;outline:none;box-sizing:border-box}
  .footer-info{text-align:center;margin:100px 0 50px;color:#27ae60;font-size:14pt;line-height:1.8}
  @media print{.nav-header,.footer-info{display:none}body{background:white}.diary{box-shadow:none;padding:20px}}
</style>
</head>
<body>

<div class="diary">
  <div class="nav-header">
    <button class="nav-button" onclick="changeMonth(-12)">이전 해</button>
    <button class="nav-button" onclick="changeMonth(-1)">이전 달</button>
    <button class="nav-button" onclick="goToCurrentMonth()">오늘 달</button>
    <button class="nav-button" onclick="changeMonth(1)">다음 달</button>
    <button class="nav-button" onclick="changeMonth(12)">다음 해</button>
    
    <!-- 이게 딱 가운데 큰 제목 -->
    
  <!-- 여기서 제목이 버튼 아래로 딱 붙음 -->

  <div id="calendar-container"></div>
</div>

<p class="footer-info">
  ← 클릭하면 입력 · 내용 자동 저장 (브라우저에 영구 보관)<br>
  연도 제한 없이 무제한 이동 · 인쇄도 완벽
</p>

<script>
const STORAGE_KEY_PREFIX = 'diary_content_';
let currentYear, currentMonth;

function loadContent(dateStr) { return localStorage.getItem(STORAGE_KEY_PREFIX + dateStr) || ''; }
function saveContent(dateStr, content) {
  if (content.trim() === '') localStorage.removeItem(STORAGE_KEY_PREFIX + dateStr);
  else localStorage.setItem(STORAGE_KEY_PREFIX + dateStr, content);
}

function goToCurrentMonth() {
  const today = new Date();
  currentYear = today.getFullYear();
  currentMonth = today.getMonth();
  renderCalendar();
}

function changeMonth(delta) {
  currentMonth += delta;
  while (currentMonth < 0) { currentMonth += 12; currentYear--; }
  while (currentMonth > 11) { currentMonth -= 12; currentYear++; }
  renderCalendar();
}

function renderCalendar() {
  const display = document.getElementById('currentDisplay');
  display.textContent = `${currentYear}년 ${currentMonth + 1}월`;

  const firstDay = new Date(currentYear, currentMonth, 1);
  const startDate = new Date(firstDay);
  startDate.setDate(startDate.getDate() - firstDay.getDay());

  const today = new Date();
  const todayStr = `${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,'0')}-${String(today.getDate()).padStart(2,'0')}`;

  let html = '<table><tr>';
  ["일","월","화","수","목","금","토"].forEach(d => html += `<th>${d}요일</th>`);
  html += '</tr>';

  let date = new Date(startDate);
  let rowCount = 0;
  while (rowCount < 6) {
    html += '<tr>';
    for (let i = 0; i < 7; i++) {
      const y = date.getFullYear();
      const m = date.getMonth();
      const d = date.getDate();
      const dateStr = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
      const isThisMonth = y === currentYear && m === currentMonth;
      const isToday = dateStr === todayStr;
      const isWeekend = date.getDay() === 0 || date.getDay() === 6;

      let classes = [];
      if (isWeekend) classes.push('weekend');
      if (!isThisMonth) classes.push('other-month');
      if (isToday) classes.push('today');

      html += `<td class="${classes.join(' ')}">`;
      html += `<div class="day ${date.getDay()===0?'sunday':''} ${date.getDay()===6?'saturday':''}">${d}</div>`;
      if (isThisMonth) {
        const saved = loadContent(dateStr);
        html += `<textarea class="content" placeholder="내용 입력..." data-date="${dateStr}"
                 oninput="saveContent(this.dataset.date, this.value)">${saved}</textarea>`;
      }
      html += '</td>';
      date.setDate(date.getDate() + 1);
    }
    html += '</tr>';
    if (rowCount >= 4 && date.getMonth() !== currentMonth) break;
    rowCount++;
  }
  html += '</table>';
  document.getElementById('calendar-container').innerHTML = html;
}

goToCurrentMonth(); // 시작
</script>

</body>
</html>
